# 資產管理系統 TODO

## 資料庫架構
- [x] 設計並建立資料庫 Schema (幣別、銀行、基金、股票、虛擬資產、配息記錄等表)
- [x] 執行資料庫遷移

## 使用者認證與權限管理
- [x] 建立管理員權限檢查中間件
- [x] 實作使用者管理 API (列表、新增、編輯、停用)
- [x] 設定初始管理員帳號為 admin

## 多銀行帳戶與存款管理
- [x] 建立銀行帳戶管理 API
- [x] 建立多幣別存款管理 API
- [x] 開發銀行帳戶管理介面
- [x] 開發存款管理介面

## 基金持倉管理
- [x] 建立基金清單管理 API
- [x] 建立基金持倉管理 API (新增、編輯、刪除)
- [x] 開發基金持倉管理介面
- [x] 支援在途金額追蹤

## 股票持倉管理
- [x] 建立股票持倉管理 API (美股、台股)
- [x] 開發股票持倉管理介面
- [ ] 整合股票報價 API

## 虛擬資產管理
- [x] 建立虛擬資產持倉管理 API (支援多交易所)
- [x] 開發虛擬資產管理介面
- [x] 支援質押追蹤功能

## 損益分析與配息追蹤
- [x] 建立損益計算引擎 (資本損益、損益百分比)
- [ ] 建立配息記錄管理 API
- [x] 計算含息損益比
- [x] 開發損益分析報表介面
- [ ] 開發配息追蹤介面

## 多幣別換算與匯率管理
- [x] 建立幣別與匯率管理 API
- [ ] 整合匯率自動更新 API
- [x] 實作多幣別統一換算邏輯

## 資產總覽儀表板
- [x] 開發總資產統計 API
- [ ] 開發資產分佈圖表 (按銀行、幣別、資產類型)
- [ ] 開發損益趨勢圖表
- [x] 建立儀表板主頁面

## 管理員後台
- [x] 開發使用者清單介面
- [x] 開發新增/編輯使用者介面
- [x] 開發角色設定功能
- [x] 開發帳號啟用/停用功能

## 測試與部署
- [x] 撰寫單元測試
- [ ] 系統整合測試
- [x] 建立專案檢查點

## 新增功能需求
- [x] 基金持倉新增自由建立基金名稱功能
- [x] 基金新增頁面或對話框
- [x] 基金名稱、代碼、幣別等欄位管理
- [x] 基金與持倉的關联最佐化


## 基金淨值自動更新 - 基富通網頁擷取
- [x] 研究基富通網頁結構與擷取方法
- [x] 建立基富通擷取服務（server/services/fundScraper.ts）
- [x] 新增基金代碼欄位到數據庫
- [ ] 建立後台定時更新任務（每小時執行一次）
- [x] 前端新增手動更新淨值按鈕
- [x] 測試基富通擷取與損益計算準確性


## 定時更新排程與重試機制
- [x] 安裝 node-cron 依賴
- [x] 建立排程服務（server/services/cronScheduler.ts）
- [x] 實現每小時執行基富通擷取任務
- [x] 新增失敗重試機制（指數退避策略）
- [x] 建立更新歷史記錄表
- [x] 實現排程狀態監控 API
- [x] 測試排程執行與重試邏輯
